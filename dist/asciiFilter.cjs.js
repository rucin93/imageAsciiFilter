"use strict";const t="    `.-:',_\";|!+/<>=^ir?cvl*LstJf7)xjo(unT1zYCe{Fy}I[2Sa]3hkVE45ZmPwpGqUbXdK#6A9OH$Dg8R%B@&QN0MW".split("").reverse();function e(t){const e="@#$=*!;:~-,.  ";return e[parseInt((t*(e.length-1)).toString(),10)]}function i(t,e){return[e[t*=4],e[t+1],e[t+2]]}function n(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}module.exports=class{constructor(t){this.element=t.element||null,this.container=t.container||null,this.callback=t.callback||(()=>!0),this.width=t.width||null,this.color=t.color||null,this.init()}init(){this.element.addEventListener("load",(()=>{this.render()}))}render(){const{width:t,height:e}=this.getDimension(this.element);if(!t||!e)return!1;this.imageData=function(t,e){const i=document.createElement("canvas").getContext("2d"),{naturalWidth:n,naturalHeight:r}=t,a=r/n;return i.drawImage(t,0,0,e,e*a),i.getImageData(0,0,e,e*a).data}(this.element,this.width);const i=this.getAsciiString();this.container&&(this.container.innerHTML=i),this.callback&&this.callback(i)}getDimension(t){const e=t.naturalHeight/t.naturalWidth;return{width:this.width,height:~~(this.width*e)}}getAsciiString(){const{width:r,height:a}=this.getDimension(this.element);let s="";for(let h=0;h<r*a;h++){h%r==0&&(s+="\n");const a=i(h,this.imageData),c=Math.max(...a)/255;s+=this.color?`<i style="color: rgb(${a.join(",")})">${l=c,t[parseInt((l*(t.length-1)).toString(),10)]}</i>`:n(e(c))}var l;return s}};
